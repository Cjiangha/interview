<view class="{{['container data-v-98b00a5c',(hasLeftWin)?'container-pc':'']}}"><block wx:if="{{!hasLeftWin}}"><uni-nav-bar vue-id="46ad2a54-1" left-icon="arrowthinleft" fixed="{{true}}" status-bar="{{true}}" title="{{title}}" data-event-opts="{{[['^clickLeft',[['goBack']]]]}}" bind:clickLeft="__e" class="data-v-98b00a5c" bind:__l="__l"></uni-nav-bar></block><block wx:if="{{step==1&&!dialogSuccessVisible}}"><view class="container-main data-v-98b00a5c"><view class="project-create data-v-98b00a5c"><view class="forms-create data-v-98b00a5c"><view class="session-form data-v-98b00a5c"><view class="session-title data-v-98b00a5c"><view class="h3 data-v-98b00a5c">项目信息</view></view><view class="session-content data-v-98b00a5c"><view class="forms-item displayFlex data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">项目名称</view><view class="forms-item_content data-v-98b00a5c"><uni-easyinput bind:input="__e" class="input-value data-v-98b00a5c" vue-id="46ad2a54-2" inputBorder="{{false}}" trim="both" placeholderStyle="color:#CCCCCC" placeholder="请输入" value="{{projectInfo.supperPrjName}}" data-event-opts="{{[['^input',[['__set_model',['$0','supperPrjName','$event',[]],['projectInfo']]]]]}}" bind:__l="__l"></uni-easyinput></view></view><view data-event-opts="{{[['tap',[['openAddressDialog',['$event']]]]]}}" class="forms-item displayFlex data-v-98b00a5c" bindtap="__e"><view class="forms-item_label data-v-98b00a5c">项目地区</view><view class="forms-item_content data-v-98b00a5c"><view class="picker text-one-overflow iconfont bandan_icon_xiayibu data-v-98b00a5c">{{addressInfo}}</view></view></view><view class="forms-item displayFlex data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">详细地点</view><view class="forms-item_content data-v-98b00a5c"><uni-easyinput bind:input="__e" class="input-value data-v-98b00a5c" vue-id="46ad2a54-3" inputBorder="{{false}}" trim="both" placeholderStyle="color:#CCCCCC" placeholder="请输入" value="{{projectInfo.prjRegion}}" data-event-opts="{{[['^input',[['__set_model',['$0','prjRegion','$event',[]],['projectInfo']]]]]}}" bind:__l="__l"></uni-easyinput></view></view><view class="forms-item displayFlex data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">计划工期(天)</view><view class="forms-item_content data-v-98b00a5c"><uni-easyinput bind:input="__e" class="input-value data-v-98b00a5c" vue-id="46ad2a54-4" type="number" inputBorder="{{false}}" trim="both" placeholderStyle="color:#CCCCCC" placeholder="请输入" value="{{projectInfo.prjPlan}}" data-event-opts="{{[['^input',[['__set_model',['$0','prjPlan','$event',[]],['projectInfo']]]]]}}" bind:__l="__l"></uni-easyinput></view></view><view class="forms-item displayFlex data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">中标合同价(元)</view><view class="forms-item_content data-v-98b00a5c"><uni-easyinput bind:input="__e" class="input-value data-v-98b00a5c" vue-id="46ad2a54-5" type="digit" inputBorder="{{false}}" trim="both" placeholderStyle="color:#CCCCCC" placeholder="请输入" value="{{projectInfo.bidContract}}" data-event-opts="{{[['^input',[['__set_model',['$0','bidContract','$event',[]],['projectInfo']]]]]}}" bind:__l="__l"></uni-easyinput></view></view><view class="forms-item displayFlex data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">保证金金额(元)</view><view class="forms-item_content data-v-98b00a5c"><uni-easyinput bind:input="__e" class="input-value data-v-98b00a5c" vue-id="46ad2a54-6" type="digit" inputBorder="{{false}}" trim="both" placeholderStyle="color:#CCCCCC" placeholder="请输入" value="{{projectInfo.bond}}" data-event-opts="{{[['^input',[['__set_model',['$0','bond','$event',[]],['projectInfo']]]]]}}" bind:__l="__l"></uni-easyinput></view></view></view></view></view><view data-event-opts="{{[['tap',[['submitStepOne',['$event']]]]]}}" class="submit-btn data-v-98b00a5c" bindtap="__e">下一步</view></view></view></block><block wx:if="{{step==2&&!dialogSuccessVisible}}"><view class="container-main data-v-98b00a5c"><view class="forms-detail data-v-98b00a5c"><view class="session-form data-v-98b00a5c"><view class="session-content data-v-98b00a5c"><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">项目名称</view><view class="forms-item_content data-v-98b00a5c"><view class="value text-one-overflow data-v-98b00a5c">{{projectInfo.supperPrjName}}</view></view></view><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请选择企业</view><view data-event-opts="{{[['tap',[['openChooseEnterprise',['$event']]]]]}}" class="forms-item_content data-v-98b00a5c" bindtap="__e"><view class="picker text-one-overflow iconfont bandan_icon_zhankai data-v-98b00a5c">{{projectInfo.enterpriseName}}</view></view></view><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请选择企业资质</view><view class="forms-item_content data-v-98b00a5c"><block wx:if="{{projectInfo.enterpriseId&&projectInfo.enterpriseId!=''}}"><uni-data-picker class="data-picker data-v-98b00a5c" vue-id="46ad2a54-7" border="{{false}}" localdata="{{enterpriseQuaListData}}" popup-title="请选择企业资质" value="{{projectInfo.quaDictId}}" data-event-opts="{{[['^change',[['quaGradeChange']]],['^input',[['__set_model',['$0','quaDictId','$event',[]],['projectInfo']]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></uni-data-picker></block><block wx:else><view class="picker text-one-overflow iconfont bandan_icon_zhankai data-v-98b00a5c" data-tip="请先选择企业" data-event-opts="{{[['tap',[['handleSelectTip',['$event']]]]]}}" bindtap="__e">{{projectInfo.enterpriseName}}</view></block></view></view><view class="forms-item type-forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请选择保函类型</view><view class="forms-item_content data-v-98b00a5c"><view class="type-list uni-flex data-v-98b00a5c"><block wx:for="{{guaranteeType}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['col data-v-98b00a5c',item.dictValue==projectInfo.productType?'active':'']}}" data-index="{{index}}" data-code="{{item.dictValue}}" data-event-opts="{{[['tap',[['guaranteeTypeChange',['$event']]]]]}}" bindtap="__e">{{item.dictLabel}}</view></block></view></view></view><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请选择保函时长</view><view class="forms-item_content data-v-98b00a5c"><picker value="{{timeLenIndex}}" range="{{timeLen}}" range-key="dictLabel" data-event-opts="{{[['change',[['bindTimeLenChange',['$event']]]]]}}" bindchange="__e" class="data-v-98b00a5c"><view class="picker text-one-overflow iconfont bandan_icon_zhankai data-v-98b00a5c" style="background-color:#fff;">{{timeLen[timeLenIndex]&&timeLen[timeLenIndex].dictLabel||''}}</view></picker></view></view><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请输入成交价</view><view class="forms-item_content uni-flex data-v-98b00a5c"><uni-easyinput class="input-value data-v-98b00a5c" vue-id="46ad2a54-8" type="digit" inputBorder="{{false}}" trim="both" placeholder="请输入成交价（卖给用户的价格）" value="{{projectInfo.transactionPrice}}" data-event-opts="{{[['^confirm',[['transactionPriceChange']]],['^input',[['__set_model',['$0','transactionPrice','$event',[]],['projectInfo']]]]]}}" bind:confirm="__e" bind:input="__e" bind:__l="__l"></uni-easyinput><text class="unit data-v-98b00a5c">元</text></view></view><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">选择保函模板类型</view><view class="forms-item_content data-v-98b00a5c"><picker value="{{templateTypeIndex}}" range="{{templateType}}" range-key="templateTypeName" data-event-opts="{{[['change',[['bindTemplateTypeChange',['$event']]]]]}}" bindchange="__e" class="data-v-98b00a5c"><view class="picker text-one-overflow iconfont bandan_icon_zhankai data-v-98b00a5c" style="background-color:#fff;">{{templateType[templateTypeIndex]&&templateType[templateTypeIndex].templateTypeName}}</view></picker></view></view><block wx:if="{{orgList&&orgList.length>0}}"><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请选择金融机构</view><view class="forms-item_content data-v-98b00a5c"><view class="financial-list data-v-98b00a5c"><radio-group class="data-v-98b00a5c"><block wx:for="{{orgList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><label class="rows displayFlex data-v-98b00a5c" data-index="{{index}}" data-event-opts="{{[['tap',[['financialChange',['$event']]]]]}}" bindtap="__e"><radio style="transform:scale(0.7);" color="#FFC300" value="{{item.configId}}" class="data-v-98b00a5c"></radio><view class="info data-v-98b00a5c"><view class="h3 data-v-98b00a5c">{{item.orgName}}</view><view class="p data-v-98b00a5c">{{"预估成本：¥"+item.estimateBasicPremium+"，估计收入￥"+item.estimateIncome}}</view></view></label></block></radio-group></view></view></view></block><block wx:if="{{orgList&&orgList.length>0&&configId&&configId!=''}}"><view class="forms-item data-v-98b00a5c"><view class="forms-item_label data-v-98b00a5c">请选择保函模板</view><view class="forms-item_content data-v-98b00a5c"><view class="templete-list data-v-98b00a5c"><radio-group data-event-opts="{{[['change',[['templeteChange',['$event']]]]]}}" bindchange="__e" class="data-v-98b00a5c"><block wx:for="{{guaTemplate}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="rows displayFlex data-v-98b00a5c"><label class="label displayFlex data-v-98b00a5c"><radio style="transform:scale(0.7);" color="#FFC300" value="{{item.attachId}}" checked="{{projectInfo.guaTemplateId==item.attachId}}" class="data-v-98b00a5c"></radio><view class="name data-v-98b00a5c">{{item.insureName}}</view></label><block wx:if="{{item.attachUrl&&item.attachUrl!=''}}"><view class="btn data-v-98b00a5c" data-index="{{index}}" data-event-opts="{{[['tap',[['downloadFile',['$event']]]]]}}" bindtap="__e">查看</view></block></view></block><view class="rows displayFlex data-v-98b00a5c"><label class="label displayFlex data-v-98b00a5c"><radio style="transform:scale(0.7);" color="#FFC300" value="diy" checked="{{projectInfo.guaTemplateId=='diy'}}" class="data-v-98b00a5c"></radio><view class="name data-v-98b00a5c">自定义模板</view></label><view class="file data-v-98b00a5c"><uni-file-picker vue-id="46ad2a54-9" file-mediatype="all" mode="list" limit="1" compress-size="1000" uploadUrl="{{uploadUrl}}" image-styles="{{fileStyles}}" value="{{guaDiyTemplate}}" data-event-opts="{{[['^fail',[['guaDiyTemplateFail']]],['^input',[['__set_model',['','guaDiyTemplate','$event',[]]]]]]}}" bind:fail="__e" bind:input="__e" class="data-v-98b00a5c" bind:__l="__l" vue-slots="{{['default']}}"><view class="file-upload vh-center data-v-98b00a5c"><view class="btn data-v-98b00a5c">上传</view></view></uni-file-picker></view></view></radio-group></view></view></view></block><view class="forms-item data-v-98b00a5c"><view data-event-opts="{{[['tap',[['submitStepTwo',['$event']]]]]}}" class="submit-btn data-v-98b00a5c" bindtap="__e">下一步</view></view></view></view><bd-material-upload vue-id="46ad2a54-10" dialog-visible="{{materialUploadVisible||step==2&&hasLeftWin}}" has-left-win="{{hasLeftWin}}" upload-url="{{uploadUrl}}" base-params="{{materialsList}}" data-event-opts="{{[['^submitSure',[['submitStepThree']]],['^closeSubmit',[['closeMaterialUpload']]]]}}" bind:submitSure="__e" bind:closeSubmit="__e" class="data-v-98b00a5c" bind:__l="__l"></bd-material-upload></view></view></block><block wx:if="{{dialogSuccessVisible}}"><view class="container-main data-v-98b00a5c"><bd-success-page vue-id="46ad2a54-11" dialog-visible="{{dialogSuccessVisible}}" data-event-opts="{{[['^submitSure',[['handleSuccess']]]]}}" bind:submitSure="__e" class="data-v-98b00a5c" bind:__l="__l"></bd-success-page></view></block><bd-choose-enterprise vue-id="46ad2a54-12" dialog-visible="{{chooseEnterpriseVisible}}" has-left-win="{{hasLeftWin}}" show-count="{{showCount}}" selected-enterprise-id="{{projectInfo.enterpriseId}}" selected-enterprise-name="{{projectInfo.enterpriseName}}" data-event-opts="{{[['^closeSubmit',[['closeChooseEnterprise']]],['^submitNext',[['enterpriseChange']]]]}}" bind:closeSubmit="__e" bind:submitNext="__e" class="data-v-98b00a5c" bind:__l="__l"></bd-choose-enterprise><bd-address-dialog vue-id="46ad2a54-13" dialog-visible="{{dialogAddressVisible}}" has-left-win="{{hasLeftWin}}" select-adress="{{selectAdress}}" data-event-opts="{{[['^closeDialog',[['handleCloseAddressDialog']]],['^submitSure',[['handleSureAddressDialog']]],['^submitInit',[['handleInitAddressDialog']]]]}}" bind:closeDialog="__e" bind:submitSure="__e" bind:submitInit="__e" class="data-v-98b00a5c" bind:__l="__l"></bd-address-dialog></view>