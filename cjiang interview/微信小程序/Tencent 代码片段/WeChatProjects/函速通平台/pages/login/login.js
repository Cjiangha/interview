(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0036":function(e,t,n){"use strict";(function(e){n("6cdc");i(n("66fd"));var t=i(n("a86a"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"06e5":function(e,t,n){"use strict";var i=n("59c6"),o=n.n(i);o.a},3285:function(e,t,n){"use strict";n.r(t);var i=n("8edd"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"59c6":function(e,t,n){},"8edd":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("a34a")),o=n("61f7"),a=n("4f96"),s=n("3028"),r=u(n("19e7"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,i,o,a,s){try{var r=e[a](s),u=r.value}catch(c){return void n(c)}r.done?t(u):Promise.resolve(u).then(i,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){c(a,i,o,s,r,"next",e)}function r(e){c(a,i,o,s,r,"throw",e)}s(void 0)}))}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=getApp(),g={data:function(){return{verifiParams:{},pwdParams:{},tabIndex:1,codeTimer:null,codeCount:"",verifiOptions:{verifiDisable:!1,verifiText:"获取验证码"},verifiInfo:{},buttonLoading:!1}},computed:{hasLeftWin:function(){return this.$store.getters.hasLeftWin}},onLoad:function(){},methods:{goBack:function(){h.goBack()},handleTab:function(e){var t=e.currentTarget.dataset.index;this.tabIndex=t},handleVerifiCode:function(){var e=this.verifiParams;e.username&&""!=e.username?(0,o.validateMobile)(e.username)?(this.$set(this.verifiOptions,"verifiDisable",!0),this.getMobileStatus(e.username)):this.$native.toast("手机号码格式不正确"):this.$native.toast("手机号码不能为空")},getMobileStatus:function(e){var t=this;(0,a.getMobileStatus)({mobile:e}).then((function(n){n&&0===n.code?n.data&&0===n.data.status?(t.$native.toast("手机号未注册"),t.$set(t.verifiOptions,"verifiDisable",!1)):(t.downTime(),t.getSmsCode(e)):(t.$set(t.verifiOptions,"verifiDisable",!1),t.$native.toast(n.message||"获取手机注册状态失败"))})).catch((function(e){t.$set(t.verifiOptions,"verifiDisable",!1),t.$native.toast(e.toString())}))},getSmsCode:function(e){var t=this;(0,a.getSmsCode)({mobile:e,systemName:"函速通平台"}).then((function(e){e&&0===e.code?(t.$native.toast("获取验证码成功"),t.verifiInfo=e.data):(clearInterval(t.codeTimer),t.$set(t.verifiOptions,"verifiText","获取验证码"),t.$set(t.verifiOptions,"verifiDisable",!1),t.$native.toast(e.message||"获取验证码失败"))})).catch((function(e){clearInterval(t.codeTimer),t.$set(t.verifiOptions,"verifiText","获取验证码"),t.$set(t.verifiOptions,"verifiDisable",!1),t.$native.toast(e)}))},downTime:function(){var e=this,t=59;this.codeTimer||(this.codeCount=t,this.$set(this.verifiOptions,"verifiDisable",!0),this.$set(this.verifiOptions,"verifiText","(".concat(this.codeCount,"s)后重发")),this.codeTimer=setInterval((function(){e.codeCount>1&&e.codeCount<=t?(e.codeCount--,e.$set(e.verifiOptions,"verifiText","(".concat(e.codeCount,"s)后重发"))):(e.$set(e.verifiOptions,"verifiText","重新获取"),e.$set(e.verifiOptions,"verifiDisable",!1),clearInterval(e.codeTimer),e.codeTimer=null)}),1e3))},submitVerifiLogin:function(){var e=this.verifiParams;if(e.username&&""!=e.username)if((0,o.validateMobile)(e.username))if(e.smsCode&&""!=e.smsCode){var t={};for(var n in e)t[n]=e[n],"smsCode"==n&&(t.unvsSmsDto=this.verifiInfo,t.unvsSmsDto.smsCode=e[n],t.unvsSmsDto.mobile=t.username);!t.unvsSmsDto||t.unvsSmsDto.expiredTime&&""!=t.unvsSmsDto.expiredTime&&t.unvsSmsDto.sign&&""!=t.unvsSmsDto.sign?(t.checkType=1,this.submitLogin(t)):this.$native.toast("请重新获取验证码")}else this.$native.toast("验证码不能为空");else this.$native.toast("手机号码格式不正确");else this.$native.toast("手机号码不能为空")},submitPwdLogin:function(){console.log(111);var e=this.pwdParams;if(e.username&&""!=e.username)if(console.log(222),(0,o.validateMobile)(e.username))if(console.log(333),e.password&&""!=e.password){console.log(444);var t={};for(var n in e)console.log("key",n,e[n]),t[n]=e[n],"password"==n&&(t[n]=(0,r.default)(e[n]),console.log("params[key]",t[n]));console.log(555),t.checkType=0,this.submitLogin(t)}else this.$native.toast("密码不能为空");else this.$native.toast("手机号码格式不正确");else this.$native.toast("手机号码不能为空")},submitLogin:function(e){console.log(666,e),this.$native.showLoading(),this.buttonLoading=!0;var t=h.globalData.openId||h.globalData.noLogin_openId,n=h.globalData.unionId||h.globalData.noLogin_unionId;this.wechatLogin(e,t,n)},wechatLogin:function(e,t,n){var i=this,o=d(d({},e),{},{wxOpenId:t,wxUnionId:n});0==e.checkType&&(o.unvsSmsDto={expiredTime:"",mobile:e.username,sign:"",smsCode:""}),(0,s.bindWxUsers)(o).then((function(e){i.getAgentInfo()})).catch((function(e){i.$native.hideLoading(),i.$native.toast(e.toString()||"绑定失败"),i.buttonLoading=!1}))},toPage:function(){var t=this;return f(i.default.mark((function n(){var o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=t,t.$native.hideLoading(),t.buttonLoading=!1,e.reLaunch({url:"/pages/checkInfo/checkInfo",success:function(){o.$util.removeStorage("redirect")},complete:function(e){console.log("res3",e)}});case 4:case"end":return n.stop()}}),n)})))()},getAgentInfo:function(){var t=this;(0,s.getAgentInfo)().then((function(n){n&&0===n.code?(t.$native.hideLoading(),t.buttonLoading=!1,"null"==n.data||null==n.data||n.data&&(0==n.data.status||2==n.data.status)?e.reLaunch({url:"/pages/checkInfo/checkInfo"}):e.reLaunch({url:"/pages/project/list/list"})):(t.$native.hideLoading(),t.buttonLoading=!1,t.$native.toast(n.message||"获取用户信息失败"),e.reLaunch({url:"/pages/checkInfo/checkInfo"}))})).catch((function(n){t.$native.hideLoading(),t.buttonLoading=!1,t.$native.toast(n.toString()||"获取用户信息失败"),e.reLaunch({url:"/pages/checkInfo/checkInfo"})}))}}};t.default=g}).call(this,n("543d")["default"])},a86a:function(e,t,n){"use strict";n.r(t);var i=n("b632"),o=n("3285");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("06e5");var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"0b6e44ac",null,!1,i["a"],s);t["default"]=u.exports},b632:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uniNavBar:function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"f31d"))},uniEasyinput:function(){return n.e("components/uni-easyinput/uni-easyinput").then(n.bind(null,"eea8"))}},o=function(){var e=this,t=e.$createElement;e._self._c},a=[]}},[["0036","common/runtime","common/vendor"]]]);