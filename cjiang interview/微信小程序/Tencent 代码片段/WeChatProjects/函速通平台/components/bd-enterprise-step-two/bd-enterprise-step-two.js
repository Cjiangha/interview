(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/bd-enterprise-step-two/bd-enterprise-step-two"],{"0337":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var i={uniEasyinput:function(){return a.e("components/uni-easyinput/uni-easyinput").then(a.bind(null,"eea8"))},uniFilePicker:function(){return Promise.all([a.e("common/vendor"),a.e("components/uni-file-picker/uni-file-picker")]).then(a.bind(null,"43e3"))},mxDatepicker:function(){return a.e("components/mx-datepicker/mx-datepicker").then(a.bind(null,"b3b9"))},bdQuaPicker:function(){return a.e("components/bd-qua-picker/bd-qua-picker").then(a.bind(null,"9cf8"))}},n=function(){var t=this,e=t.$createElement;t._self._c},r=[]},"5e63":function(t,e,a){"use strict";var i=a("7545"),n=a.n(i);n.a},"65f6":function(t,e,a){"use strict";a.r(e);var i=a("85de"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},7545:function(t,e,a){},"85de":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("470c");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s(t){return f(t)||l(t)||c(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return h(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(t,e):void 0}}function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(t){if(Array.isArray(t))return h(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var d=getApp(),p={name:"BdEnterpriseStepTwo",props:{dialogVisible:{type:Boolean,default:!0},baseParams:{type:Object,default:function(){return{}}},isPC:{type:Boolean,default:!1},fileStyles:{type:Object,default:function(){return{}}},quaLabelList:{type:Array,default:function(){return[]}}},data:function(){return{formParams:{},quaList:[{}],showPicker:!1,dateValue:"",dataIndex:0,checkRangeName:"",fileValue:{},uploadUrl:"/uploadWeb",quaGrade:{},quaIndex:0,dialogQuaVisible:!1,selectedQuaLables:{},enterpriseQuaVal:{},authorizationLetter:[],watchCount:0,rules:[{label:"licenseName",msg:"资质名称不能为空"},{label:"licenseNum",msg:"资质编号不能为空"},{label:"visaOrg",msg:"发证机关不能为空"},{label:"issueDate",msg:"发证时间不能为空"},{label:"licensePic",msg:"资质证书不能为空"}]}},watch:{baseParams:function(t){var e=this;this.formParams=t,t&&t.enterpriseName&&this.watchCount<=0&&(this.quaList=t&&t.quaList&&t.quaList.length>0?s(t.quaList):[{}],this.quaList.forEach((function(t,a){if(t&&t.licensePic&&(e.fileValue[a]=[{}],e.$set(e.fileValue[a][0],"url",t.licensePicUrl),e.$set(e.fileValue[a][0],"attachBatchId",t.licensePic)),t&&t.quaInfoList&&t.quaInfoList.length>0){var i={},n=[];t.quaInfoList.forEach((function(t){n.push(t.pquaDictName+"/"+t.quaDictName),i[t.pquaDictId]=t})),e.$set(e.enterpriseQuaVal,a,n.toString()),e.$set(e.quaGrade,a,t.quaInfoList),e.$set(e.selectedQuaLables,a,i)}})),t&&t.authorizationLetter&&(this.authorizationLetter[0]={},this.$set(this.authorizationLetter[0],"url",t.authorizationLetterUrl),this.$set(this.authorizationLetter[0],"attachBatchId",t.authorizationLetter)),this.watchCount++)}},methods:{DatePicker:function(t){var e=t.currentTarget.dataset.rangename,a=t.currentTarget.dataset.index;this.checkRangeName=e,this.showPicker=!0,this.dataIndex=a,this.dateValue=this.quaList[a][e]},changeDate:function(t){var e=new Date,a=t.value.replace(/-/g,"/");e.getTime()<=new Date(a).getTime()&&"issueDate"==this.checkRangeName?i.native.toast("发证时间不能小于当前时间"):(this.showPicker=!1,t&&this.$set(this.quaList[this.dataIndex],this.checkRangeName,t.value))},cancelDate:function(t){this.showPicker=!1,this.$set(this.quaList[this.dataIndex],this.checkRangeName,"")},closeDate:function(t){this.showPicker=!1},failUpload:function(t){i.native.toast(t.tempFiles[0].errMsg)},failAuthorizationLetter:function(t){i.native.toast(t.tempFiles[0].errMsg)},openQuaDialog:function(t,e){this.quaIndex=e,this.dialogQuaVisible=!0},closeQuaDialog:function(){this.dialogQuaVisible=!1},handleSelectQua:function(t){var e=[],a=[];for(var i in t){e.push(t[i].pquaDictName+"/"+t[i].quaDictName);var n={pquaDictId:t[i].pquaDictId,quaDictId:t[i].quaDictId};a.push(n)}this.$set(this.selectedQuaLables,this.quaIndex,t),this.$set(this.enterpriseQuaVal,this.quaIndex,e.toString()),this.$set(this.quaGrade,this.quaIndex,a),this.dialogQuaVisible=!1},quaGradeChange:function(t,e){this.quaGrade;var a=[{parentQuaDictId:t.detail.value[0].value,quaDictId:t.detail.value[1].value}];this.$set(this.quaGrade,e,a)},addQua:function(){this.quaList.push({})},delQua:function(t){var e=t.currentTarget.dataset.index;this.$set(this.quaList[e],"isDel",!0)},handleNext:function(){var t=this.getFormParams();t&&(t.isSaveDraft=0,this.$emit("submit-next",t))},handleSaveDraft:function(){var t=this.getFormParams();t&&(t.isSaveDraft=1,this.$emit("submit-save-draft",t))},getFormParams:function(){var t=this.rules,e=s(this.quaList),a=this.quaGrade,n=r({},this.formParams),u=this.authorizationLetter,o=this.fileValue;n.authorizationLetter=u.length>0?u[0].attachBatchId:"";var c=!1,l=0,f=[];for(var h in e)if(!e[h].isDel){l++;var d=e[h];if(!a[h]){c=!0,i.native.toast("第"+l+"个资质证书请选择资质等级");break}for(var p in d.quaInfoList=a[h],o[h]&&(d.licensePic=o[h][0].attachBatchId),t){var m=t[p].label,g=t[p].msg;if(!d[m]){i.native.toast("第"+l+"个"+g),c=!0;break}if(t[p].reg){var v=t[p].reg,b=t[p].regMsg;if(!v(d[m])){i.native.toast("第"+l+"个"+b),c=!0;break}}}f.push(d)}return n.quaList=f,n&&n.authorizationLetterUrl&&delete n.authorizationLetterUrl,!c&&n},lookView:function(){var e=this;i.native.showLoadingText("正在打开中。。。"),this.$https.downloadFile({url:i.util.authTemplete}).then((function(a){console.log("ccc",a);var n=a.tempFilePath,r=i.util.get_file_ext(n).ext;"jpeg"!=r&&"jpg"!=r&&"png"!=r?t.saveFile({tempFilePath:a.tempFilePath,success:function(e){t.openDocument({filePath:e.savedFilePath,success:function(t){i.native.hideLoading()},fail:function(t){i.native.hideLoading(),i.native.toast(t.errMsg)}})},fail:function(){i.native.hideLoading(),i.native.toast("打开失败")}}):e.previewImage(a.tempFilePath)})).catch((function(t){i.native.hideLoading(),i.native.toast(t.toString())}))},previewImage:function(e){i.native.hideLoading(),t.previewImage({current:e,urls:[e]})},downLoad:function(){d.downloadFile(i.util.authTemplete)}}};e.default=p}).call(this,a("543d")["default"])},e6a4:function(t,e,a){"use strict";a.r(e);var i=a("0337"),n=a("65f6");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("5e63");var u,s=a("f0c5"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"5cd34f93",null,!1,i["a"],u);e["default"]=o.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/bd-enterprise-step-two/bd-enterprise-step-two-create-component',
    {
        'components/bd-enterprise-step-two/bd-enterprise-step-two-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("e6a4"))
        })
    },
    [['components/bd-enterprise-step-two/bd-enterprise-step-two-create-component']]
]);
