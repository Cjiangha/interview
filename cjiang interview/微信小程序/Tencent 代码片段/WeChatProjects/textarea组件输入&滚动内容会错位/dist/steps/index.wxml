<wxs src="../wxs/utils.wxs" module="utils" />

<view class="custom-class {{ utils.bem('steps', [direction]) }}">
  <view class="van-step__wrapper">
    <view
      wx:for="{{ steps }}"
      wx:key="index"
      bindtap="onClick"
      data-index="{{ index }}"
      class="{{ utils.bem('step', [direction, status(index, active)]) }} van-hairline"
      style="{{ status(index, active) === 'inactive' ? 'color: ' + inactiveColor: '' }}"
    >
      <view class="van-step__title">
        <view class="step-title">
          <view class="title-left">
            <text class="title-name">{{ item.userName || '' }}</text>
            <text class="title-tip">{{ item.nodeTitle || '' }}</text>
          </view>
          <text class="title-time">{{ utils.formatTime(item.time, 'yyyy/MM/dd HH:mm') }}</text>
        </view>
        <view wx:if="{{item.remark}}" class="title-remark">
          {{ item.remark }}
      </view>
      </view>
      <view class="van-step__circle-container">
        <image wx:if="{{item.avatar}}" class="step-avatar" src="{{item.avatar}}"></image>
        <image wx:else class="step-avatar" src="../../images/order/default-avatar.png"></image>
      </view>
      <view
        wx:if="{{ index !== steps.length - 1 }}"
        class="step-line"
      />
    </view>
  </view>
</view>

<wxs module="status">
function get(index, active) {
  if (index < active) {
    return 'finish';
  } else if (index === active) {
    return 'process';
  }

  return 'inactive';
}

module.exports = get;
</wxs>
